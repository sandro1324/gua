# 八字分析系统

## 系统概述

八字分析系统是一个基于中国传统命理学的分析工具，通过分析用户的出生年月日时信息，生成八字信息、五行分析、日主强弱等内容，为用户提供个性化的命理分析结果。

本系统由前端和后端两部分组成：
- **前端**：使用HTML、CSS和JavaScript实现，负责用户信息收集和结果展示
- **后端**：使用Python FastAPI实现，提供八字计算和分析服务

系统具有以下特点：
- **降级服务**：当后端服务不可用时，可自动降级为纯前端模式运行
- **容错处理**：对lunar库加载失败等情况进行了处理，确保系统稳定性
- **双重计算**：支持两种计算方式：lunar-javascript（前端）和lunar-python（后端）
- **用户友好**：简洁的用户界面，详细的分析结果展示

## 安装要求

### 基本要求（最低配置）
- 现代网页浏览器（Chrome、Firefox、Edge等）

### 完整功能要求（推荐配置）
- Python 3.8+
- lunar-python 库（后端自动安装）
- lunar-javascript 库（已包含在项目中）

## 目录结构

```
卦/
├── frontend/               # 前端文件
│   ├── assets/             # 静态资源
│   │   ├── scripts.js      # JavaScript脚本
│   │   └── styles.css      # 样式表
│   ├── lunar-javascript/   # 前端八字计算库
│   │   └── lunar.js        # 主要库文件
│   ├── 用户信息表单.html     # 用户信息输入页面
│   └── bazi详细分析.html     # 分析结果展示页面
├── backend/                # 后端文件
│   ├── server.py           # 后端服务器实现
│   └── requirements.txt    # Python依赖配置
├── start_system.bat        # 启动脚本
└── README.md               # 本文档
```

## 安装和启动

### 一键启动（Windows）

1. 双击 `start_system.bat` 文件
2. 系统会自动检查环境、安装依赖并启动服务
3. 启动成功后，浏览器会自动打开用户信息表单页面

### 手动启动

#### 前端启动
1. 进入项目根目录
2. 运行 `python -m http.server 8080`
3. 打开浏览器访问 `http://localhost:8080/frontend/用户信息表单.html`

#### 后端启动
1. 进入 `backend` 目录
2. 安装依赖：`pip install -r requirements.txt`
3. 运行服务器：`python server.py`

## 使用说明

### 基本使用流程

1. 在用户信息表单页面填写个人信息：
   - 姓名
   - 性别
   - 出生日期
   - 出生时间

2. 点击"开始分析"按钮

3. 系统会自动计算并跳转到详细分析页面，展示结果：
   - 基本信息（公历日期、农历日期、生肖）
   - 八字信息（年柱、月柱、日柱、时柱）
   - 五行分析（五行得分比例）
   - 日主分析（日主强弱、命理建议）

### 模式说明

系统支持以下几种工作模式：

1. **完整模式**：前后端均正常工作，提供最准确的分析结果
2. **前端降级模式**：当后端服务不可用时，使用前端lunar-javascript库进行计算
3. **后端降级模式**：当lunar-python库不可用时，使用后端内置的简易算法进行计算

## 常见问题

### 问题：系统无法启动

**解决方案**：
- 确保Python已安装并已添加到环境变量
- 检查8000和8080端口是否被占用，如有需要可修改启动脚本中的端口
- 检查项目目录结构是否完整

### 问题：分析结果不准确

**解决方案**：
- 确认是否处于降级模式运行（查看分析结果底部提示）
- 确保lunar-python库正确安装
- 确保输入的出生日期和时间准确无误

### 问题：页面显示异常

**解决方案**：
- 尝试使用其他浏览器
- 清除浏览器缓存后重试
- 检查lunar.js文件是否正确加载（可查看浏览器控制台）

## 技术说明

### 前端技术
- 纯HTML/CSS/JavaScript实现
- lunar-javascript库用于基础八字计算
- 动态页面加载和错误处理

### 后端技术
- Python FastAPI框架
- lunar-python库用于高级八字计算
- RESTful API设计

## 开发者说明

如需扩展系统功能，可以关注以下几个方面：

1. **前端增强**：
   - 在 `frontend/assets/scripts.js` 中添加更多交互功能
   - 在 `frontend/assets/styles.css` 中优化样式

2. **后端增强**：
   - 在 `backend/server.py` 中添加更多API端点
   - 增强八字分析算法

3. **计算增强**：
   - 添加更多分析维度，如大运、流年等
   - 增加图表展示和详细解释

## 关于作者

八字分析系统由命理爱好者开发，旨在提供便捷的八字分析工具。系统仅供娱乐参考，不作为人生决策依据。 